{"version":3,"sources":["fbase.js","components/Rweet.js","routes/Home.js","routes/Auth.js","components/Navigation.js","routes/Profile.js","components/Routes.js","App.js","index.js"],"names":["firebaseApp","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","getStorage","getFirestore","Rweet","rweet","rweetObj","isOwner","useState","isEditing","setIsEditing","text","input","setInput","onDeleteHandler","a","window","confirm","deleteDoc","doc","id","storage","desertRef","ref","creatorId","deleteObject","then","console","log","catch","error","updateHandler","rweeet","updateDoc","onEditHandler","attachmentUrl","src","alt","width","height","onSubmit","event","preventDefault","value","onChange","enteredInput","target","type","placeholder","required","onClick","Home","props","userObj","setRweet","rweets","setRweets","attachment","setAttachment","useEffect","q","query","collection","onSnapshot","querySnapshot","updatedRweets","forEach","dbRweet","data","push","onSubmitHandler","uniqId","uuidv4","storageRef","uploadString","getDownloadURL","createAt","Date","now","uid","addDoc","docRef","maxLength","accept","file","files","reader","FileReader","onloadend","finishedEvent","currentTarget","result","readAsDataURL","map","Auth","email","setEmail","password","setPassword","setError","newAccount","setNewAccount","auth","getAuth","onChangeHandler","inputName","name","onSocialClick","provider","GoogleAuthProvider","GithubAuthProvider","signInWithPopup","credentialFromResult","accessToken","user","code","errorMessage","message","credentialFromError","createUserWithEmailAndPassword","userCredential","signInWithEmailAndPassword","prev","Navigation","to","displayName","Profile","refreshUser","newDisplayName","setNewDisplayName","history","useHistory","updateProfile","currentUser","enteredDisplayName","signOut","Routes","isLoggedIn","exact","path","App","init","setInit","setIsLoggedIn","setUserObj","onAuthStateChanged","getFullYear","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1d934b3d.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app';\r\nimport { getFirestore } from 'firebase/firestore';\r\nimport { getStorage } from 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n\tapiKey: 'AIzaSyBEWQMAxNx4_yTE1OpDufYoeutZG59PdPY',\r\n\tauthDomain: 'rwitter-37d3e.firebaseapp.com',\r\n\tdatabaseURL: 'https://rwitter-37d3e.firebaseio.com',\r\n\tprojectId: 'rwitter-37d3e',\r\n\tstorageBucket: 'rwitter-37d3e.appspot.com',\r\n\tmessagingSenderId: '1072656244567',\r\n\tappId: '1:1072656244567:web:bf9caf6dfd8e59d80c2812',\r\n};\r\n\r\nconst firebaseApp = initializeApp(firebaseConfig);\r\n\r\nconst storage = getStorage(firebaseApp);\r\n\r\nexport const db = getFirestore();\r\n\r\nexport default firebaseApp;\r\n","import { useState } from 'react';\r\nimport { db } from '../fbase';\r\nimport { doc, deleteDoc, updateDoc } from 'firebase/firestore';\r\nimport { getStorage, ref, deleteObject } from 'firebase/storage';\r\n\r\nconst Rweet = ({ rweetObj: rweet, isOwner }) => {\r\n\tconst [isEditing, setIsEditing] = useState(false);\r\n\tconst [input, setInput] = useState(rweet.text);\r\n\r\n\tconst onDeleteHandler = async () => {\r\n\t\tconst ok = window.confirm('Are you sure want to delete this rweet?');\r\n\t\tif (ok) {\r\n\t\t\tawait deleteDoc(doc(db, 'rweets', `${rweet.id}`));\r\n\t\t}\r\n\t\tconst storage = getStorage();\r\n\t\tconst desertRef = ref(storage, `${rweet.creatorId}`);\r\n\r\n\t\tdeleteObject(desertRef)\r\n\t\t\t.then(() => {\r\n\t\t\t\t// File deleted successfully\r\n\t\t\t\tconsole.log('file deleted');\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\t// Uh-oh, an error occurred!\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst updateHandler = async () => {\r\n\t\tconst rweeet = doc(db, 'rweets', `${rweet.id}`);\r\n\t\tawait updateDoc(rweeet, {\r\n\t\t\ttext: input,\r\n\t\t});\r\n\t};\r\n\r\n\tconst onEditHandler = async () => {\r\n\t\tsetIsEditing(true);\r\n\t};\r\n\r\n\tconst onCancelEditHandler = () => {\r\n\t\tsetIsEditing(false);\r\n\t\tsetInput(rweet.text);\r\n\t};\r\n\r\n\tconst onSubmitHandler = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tupdateHandler();\r\n\t\tsetIsEditing(false);\r\n\t};\r\n\r\n\tconst onChangeHandler = (event) => {\r\n\t\tconst enteredInput = event.target.value;\r\n\t\tconsole.log(enteredInput);\r\n\t\tsetInput(enteredInput);\r\n\t};\r\n\t// console.log(rweet.attachmentUrl);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h4>{rweet.text}</h4>\r\n\t\t\t\t\t{rweet.attachmentUrl && (\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={rweet.attachmentUrl}\r\n\t\t\t\t\t\t\talt=\"this is a image\"\r\n\t\t\t\t\t\t\twidth=\"100px\"\r\n\t\t\t\t\t\t\theight=\"100px\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{isEditing && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<form onSubmit={onSubmitHandler}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tvalue={input}\r\n\t\t\t\t\t\t\tonChange={onChangeHandler}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Edit your rweet\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<button onClick={onCancelEditHandler}>Cancel</button>\r\n\t\t\t\t\t\t<button type=\"submit\">confirm</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{isOwner && !isEditing && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<button onClick={onDeleteHandler}>Delete Rweeet</button>\r\n\t\t\t\t\t<button onClick={onEditHandler}>Edit Rweet</button>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Rweet;\r\n","import { useEffect, useState } from 'react';\r\nimport { collection, addDoc, query, onSnapshot } from 'firebase/firestore';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { db } from '../fbase';\r\nimport Rweet from '../components/Rweet';\r\n\r\nimport {\r\n\tgetStorage,\r\n\tref,\r\n\tuploadString,\r\n\tgetDownloadURL,\r\n} from 'firebase/storage';\r\n\r\nconst Home = (props) => {\r\n\tconst { userObj } = props;\r\n\t// console.log(userObj);\r\n\r\n\tconst [rweet, setRweet] = useState('');\r\n\tconst [rweets, setRweets] = useState([]);\r\n\tconst [attachment, setAttachment] = useState('');\r\n\r\n\tuseEffect(() => {\r\n\t\tconst q = query(collection(db, 'rweets'));\r\n\t\tonSnapshot(q, (querySnapshot) => {\r\n\t\t\tlet updatedRweets = [];\r\n\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t// console.log(doc.data());\r\n\t\t\t\tconst dbRweet = { id: doc.id, ...doc.data() };\r\n\t\t\t\tupdatedRweets.push(dbRweet);\r\n\t\t\t});\r\n\t\t\t// console.log(updatedRweets);\r\n\t\t\tsetRweets(updatedRweets);\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst onSubmitHandler = async (event) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tlet attachmentUrl = '';\r\n\t\tconst uniqId = uuidv4();\r\n\r\n\t\tif (attachment !== '') {\r\n\t\t\tconst storage = getStorage();\r\n\t\t\tconst storageRef = ref(storage, `${uniqId}`);\r\n\t\t\tconst response = await uploadString(storageRef, attachment, 'data_url');\r\n\r\n\t\t\tattachmentUrl = await getDownloadURL(ref(storage, `${uniqId}`));\r\n\t\t}\r\n\t\tconst rweetObj = {\r\n\t\t\ttext: rweet,\r\n\t\t\tcreateAt: Date.now(),\r\n\t\t\tcreatorId: userObj.uid,\r\n\t\t\tattachmentUrl,\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tconst docRef = await addDoc(collection(db, 'rweets'), rweetObj);\r\n\t\t\tconsole.log('Document written with ID: ', docRef.id);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error('Error adding document: ', e);\r\n\t\t}\r\n\t\tsetRweet('');\r\n\t\tsetAttachment('');\r\n\t};\r\n\r\n\tconst onChangeHandler = (event) => {\r\n\t\tconst enteredInput = event.target.value;\r\n\t\tsetRweet(enteredInput);\r\n\t\t// console.log(rweet);\r\n\t};\r\n\r\n\tconst onFileChangeHandler = (event) => {\r\n\t\tconst file = event.target.files[0];\r\n\t\tconst reader = new FileReader();\r\n\t\treader.onloadend = (finishedEvent) => {\r\n\t\t\tconsole.log(finishedEvent);\r\n\t\t\tsetAttachment(finishedEvent.currentTarget.result);\r\n\t\t};\r\n\t\treader.readAsDataURL(file);\r\n\t\t// console.log(file);\r\n\t};\r\n\r\n\tconst onClearAttachmentHandler = () => setAttachment(null);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<form onSubmit={onSubmitHandler}>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"what's in your mind?\"\r\n\t\t\t\t\tonChange={onChangeHandler}\r\n\t\t\t\t\tvalue={rweet}\r\n\t\t\t\t\tmaxLength={120}\r\n\t\t\t\t></input>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\tonChange={onFileChangeHandler}\r\n\t\t\t\t></input>\r\n\t\t\t\t<button type=\"submit\">Rweet</button>\r\n\t\t\t\t{attachment && (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<img src={attachment} width=\"50px\" height=\"50px\" />\r\n\t\t\t\t\t\t<button onClick={onClearAttachmentHandler}>Clear</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</form>\r\n\t\t\t{rweets.map((rweet) => (\r\n\t\t\t\t<Rweet\r\n\t\t\t\t\tkey={rweet.id}\r\n\t\t\t\t\trweetObj={rweet}\r\n\t\t\t\t\tisOwner={userObj.uid === rweet.creatorId}\r\n\t\t\t\t/>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Home;\r\n","import { useState } from 'react';\r\nimport {\r\n\tgetAuth,\r\n\tcreateUserWithEmailAndPassword,\r\n\tsignInWithEmailAndPassword,\r\n\tGoogleAuthProvider,\r\n\tGithubAuthProvider,\r\n\tsignInWithPopup,\r\n} from 'firebase/auth';\r\n\r\nconst Auth = () => {\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [error, setError] = useState('');\r\n\tconst [newAccount, setNewAccount] = useState(true);\r\n\tconst auth = getAuth();\r\n\r\n\tconst onChangeHandler = (event) => {\r\n\t\tconst inputName = event.target.name;\r\n\t\tif (inputName === 'email') {\r\n\t\t\tsetEmail(event.target.value);\r\n\t\t} else if (inputName === 'password') {\r\n\t\t\tsetPassword(event.target.value);\r\n\t\t}\r\n\t\t// console.log(event.target.name);\r\n\t\t// console.log(event.target.value);\r\n\t};\r\n\r\n\tconst onSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tif (newAccount) {\r\n\t\t\tcreateUserWithEmailAndPassword(auth, email, password)\r\n\t\t\t\t.then((userCredential) => {\r\n\t\t\t\t\t// Signed in\r\n\t\t\t\t\tconst user = userCredential.user;\r\n\t\t\t\t\tconsole.log(user);\r\n\t\t\t\t\t// ...\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconst errorCode = error.code;\r\n\t\t\t\t\tconst errorMessage = error.message;\r\n\t\t\t\t\tconsole.log(errorMessage);\r\n\t\t\t\t\tsetError(errorMessage);\r\n\t\t\t\t\t// ..\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tsignInWithEmailAndPassword(auth, email, password)\r\n\t\t\t\t.then((userCredential) => {\r\n\t\t\t\t\t// Signed in\r\n\t\t\t\t\tconst user = userCredential.user;\r\n\t\t\t\t\t// ...\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconst errorCode = error.code;\r\n\t\t\t\t\tconst errorMessage = error.message;\r\n\t\t\t\t\tsetError(errorMessage);\r\n\t\t\t\t});\r\n\t\t}\r\n\t};\r\n\tconst toggleAccount = () => {\r\n\t\tsetNewAccount((prev) => !prev);\r\n\t};\r\n\r\n\tconst onSocialClick = (event) => {\r\n\t\tconst {\r\n\t\t\ttarget: { name },\r\n\t\t} = event;\r\n\t\tlet provider;\r\n\t\tif (name === 'google') {\r\n\t\t\tprovider = new GoogleAuthProvider();\r\n\t\t} else if (name === 'github') {\r\n\t\t\tprovider = new GithubAuthProvider();\r\n\t\t}\r\n\r\n\t\tsignInWithPopup(auth, provider)\r\n\t\t\t.then((result) => {\r\n\t\t\t\t// This gives you a Google Access Token. You can use it to access the Google API.\r\n\t\t\t\tconst credential = GoogleAuthProvider.credentialFromResult(result);\r\n\t\t\t\tconst token = credential.accessToken;\r\n\t\t\t\t// The signed-in user info.\r\n\t\t\t\tconst user = result.user;\r\n\t\t\t\tconsole.log(user);\r\n\t\t\t\t// ...\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\t// Handle Errors here.\r\n\t\t\t\tconst errorCode = error.code;\r\n\t\t\t\tconst errorMessage = error.message;\r\n\t\t\t\t// The email of the user's account used.\r\n\t\t\t\tconst email = error.email;\r\n\t\t\t\t// The AuthCredential type that was used.\r\n\t\t\t\tconst credential = GoogleAuthProvider.credentialFromError(error);\r\n\t\t\t\t// ...\r\n\t\t\t\tconsole.log(errorMessage);\r\n\t\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<form onSubmit={onSubmit}>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tvalue={email}\r\n\t\t\t\t\tonChange={onChangeHandler}\r\n\t\t\t\t></input>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tvalue={password}\r\n\t\t\t\t\tonChange={onChangeHandler}\r\n\t\t\t\t></input>\r\n\t\t\t\t<button type=\"submit\">\r\n\t\t\t\t\t{newAccount ? 'Create Account' : 'Sign In'}\r\n\t\t\t\t</button>\r\n\t\t\t\t{error}\r\n\t\t\t</form>\r\n\t\t\t<div onClick={toggleAccount}>\r\n\t\t\t\t{newAccount ? 'Sign In' : 'Create Account'}\r\n\t\t\t</div>\r\n\t\t\t<button onClick={onSocialClick} name=\"google\">\r\n\t\t\t\tContinue With Google\r\n\t\t\t</button>\r\n\t\t\t<button onClick={onSocialClick} name=\"github\">\r\n\t\t\t\tContinue With GitHub\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Auth;\r\n","import { NavLink } from 'react-router-dom';\r\n\r\nconst Navigation = ({userObj}) => {\r\n\treturn (\r\n\t\t<nav>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<NavLink to=\"/\">Home</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<NavLink to=\"/profile\"> {userObj.displayName}</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</nav>\r\n\t);\r\n};\r\n\r\nexport default Navigation;\r\n","import { getAuth, signOut, updateProfile } from 'firebase/auth';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { db } from '../fbase';\r\nimport { useEffect, useState } from 'react';\r\n\r\nconst Profile = ({ refreshUser, userObj }) => {\r\n\t// console.log(userObj);\r\n\r\n\tconst [newDisplayName, setNewDisplayName] = useState(userObj.displayName);\r\n\r\n\tconst auth = getAuth();\r\n\tconst history = useHistory();\r\n\r\n\tconst onLogOutHandler = () => {\r\n\t\tsignOut(auth)\r\n\t\t\t.then(() => {\r\n\t\t\t\t// Sign-out successful.\r\n\t\t\t\t// console.log('succes');\r\n\t\t\t\thistory.push('/');\r\n\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\t// An error happened.\r\n\t\t\t});\r\n\t};\r\n\r\n\t// const getMyRweets = async () => {\r\n\t// \tconst rweets = collection(db, 'rweets');\r\n\t// \tconst q = query(rweets, where('creatorId', '==', `${userObj.uid}`));\r\n\t// \t// console.log(q);\r\n\t// \tconst querySnapshot = await getDocs(q);\r\n\t// \tquerySnapshot.forEach((doc) => {\r\n\t// \t\t// doc.data() is never undefined for query doc snapshots\r\n\t// \t\tconsole.log(doc.id, ' => ', doc.data());\r\n\t// \t});\r\n\t// };\r\n\r\n\t// useEffect(() => {\r\n\t// \tgetMyRweets();\r\n\t// }, []);\r\n\r\n\tconst onDisplayNameChangeHandler = (event) => {\r\n\t\tconst enteredDisplayName = event.target.value;\r\n\t\tsetNewDisplayName(enteredDisplayName);\r\n\t};\r\n\r\n\tconst onSubmitHandler = async (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tif (newDisplayName === userObj.displayName) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst update = await updateProfile(auth.currentUser, {\r\n\t\t\tdisplayName: newDisplayName,\r\n\t\t});\r\n\t\trefreshUser();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<form onSubmit={onSubmitHandler}>\r\n\t\t\t\t<input\r\n\t\t\t\t\tvalue={newDisplayName}\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Display name\"\r\n\t\t\t\t\tonChange={onDisplayNameChangeHandler}\r\n\t\t\t\t/>\r\n\t\t\t\t<button type=\"submit\">Updated Profile</button>\r\n\t\t\t</form>\r\n\t\t\t<button onClick={onLogOutHandler}>Log Out</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Profile;\r\n","import { Fragment } from 'react';\r\nimport { Route, Switch, BrowserRouter as Router } from 'react-router-dom';\r\nimport Home from '../routes/Home';\r\nimport Auth from '../routes/Auth';\r\nimport { getAuth } from 'firebase/auth';\r\nimport Navigation from './Navigation';\r\nimport Profile from '../routes/Profile';\r\n\r\nconst Routes = (props) => {\r\n\tconst { isLoggedIn, userObj, refreshUser } = props;\r\n\tconst auth = getAuth();\r\n\tconst user = auth.currentUser;\r\n\r\n\tif (user) {\r\n\t\t// User is signed in, see docs for a list of available properties\r\n\t\t// https://firebase.google.com/docs/reference/js/firebase.User\r\n\t\t// ...\r\n\t\t// console.log('yesss');\r\n\t} else {\r\n\t\t// No user is signed in.\r\n\t\t// console.log('NOOOO');\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t{isLoggedIn && <Navigation userObj={userObj} />}\r\n\t\t\t<Switch>\r\n\t\t\t\t{isLoggedIn ? (\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t\t<Home userObj={userObj} />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t<Route exact path=\"/profile\">\r\n\t\t\t\t\t\t\t<Profile userObj={userObj} refreshUser={refreshUser} />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t<Auth />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t)}\r\n\t\t\t</Switch>\r\n\t\t</Router>\r\n\t);\r\n};\r\n\r\nexport default Routes;\r\n","import React, { Fragment, useEffect, useState } from 'react';\nimport Routes from './components/Routes';\nimport { getAuth } from 'firebase/auth';\n\nfunction App() {\n\tconst auth = getAuth();\n\tconst [init, setInit] = useState(false);\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\n\tconst [userObj, setUserObj] = useState(null);\n\tuseEffect(() => {\n\t\tauth.onAuthStateChanged((user) => {\n\t\t\tif (user) {\n\t\t\t\tsetIsLoggedIn(true);\n\t\t\t\t// setUserObj(user);\n\t\t\t\tsetUserObj({ displayName: user.displayName, uid: user.uid });\n\t\t\t} else {\n\t\t\t\tsetIsLoggedIn(false);\n\t\t\t\tsetUserObj(null);\n\t\t\t}\n\t\t\tsetInit(true);\n\t\t});\n\t}, []);\n\n\tconst refreshUser = async () => {\n\t\tconst user = await auth.currentUser;\n\t\tconsole.log(user.displayName);\n\t\t// setUserObj(Object.assign({}, user));\n\t\tsetUserObj(() => {\n\t\t\treturn { displayName: user.displayName, uid: user.uid };\n\t\t});\n\t};\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{init ? (\n\t\t\t\t<Routes\n\t\t\t\t\trefreshUser={refreshUser}\n\t\t\t\t\tisLoggedIn={isLoggedIn}\n\t\t\t\t\tuserObj={userObj}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t'Initializing...'\n\t\t\t)}\n\t\t\t<footer> &copy; {new Date().getFullYear()} Rwitter</footer>\n\t\t</Fragment>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport firebase from './fbase';\n// console.log(firebase);\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}